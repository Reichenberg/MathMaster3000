//TODO: extract view logic from controller